(this["webpackJsonpwhatsapp-chat-viewer"]=this["webpackJsonpwhatsapp-chat-viewer"]||[]).push([[0],{42:function(e,t,a){e.exports=a(51)},47:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),o=a.n(c),l=(a(47),a(7)),s=function(e){var t=e.children;return n.a.createElement("div",{className:"layout-grid"},n.a.createElement("div",{className:"back-header"}),t)},i=function(e){Object(r.useEffect)((function(){var t=e.current,a=function(e){e.preventDefault(),e.stopPropagation()},r=function(e){a(e),t.classList.add("is-dragover")},n=function(e){a(e),t.classList.remove("is-dragover")};return t.addEventListener("dragover",r),t.addEventListener("dragenter",r),t.addEventListener("dragleave",n),t.addEventListener("dragend",n),t.addEventListener("drop",n),function(){t.removeEventListener("dragover",r),t.removeEventListener("dragenter",r),t.removeEventListener("dragleave",n),t.removeEventListener("dragend",n),t.removeEventListener("drop",n)}}),[e])},u=function(e,t){Object(r.useEffect)((function(){var a=e.current,r=function(e){e.preventDefault(),t(e.dataTransfer.files[0])};return a.addEventListener("drop",r),function(){return a.removeEventListener("drop",r)}}),[e,t])};function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var h=n.a.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),f=n.a.createElement("polyline",{points:"7 10 12 15 17 10"}),p=n.a.createElement("line",{x1:12,y1:15,x2:12,y2:3}),g=function(e){var t=e.svgRef,a=e.title,r=d(e,["svgRef","title"]);return n.a.createElement("svg",m({width:72,height:72,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-download",ref:t},r),a?n.a.createElement("title",null,a):null,h,f,p)},v=n.a.forwardRef((function(e,t){return n.a.createElement(g,m({svgRef:t},e))})),E=(a.p,function(e){var t=e.onSelectFile,a=Object(r.useRef)(),c=Object(r.useRef)();return u(a,t),i(a),n.a.createElement("div",{className:"drop-file",ref:a,onClick:function(){return c.current.click()}},n.a.createElement(v,null),n.a.createElement("label",{htmlFor:"chat"},"Choose a file or drag it here!"),n.a.createElement("input",{type:"file",name:"chat",id:"chat",hidden:!0,ref:c,onChange:function(e){return t(e.target.files[0])}}))}),b=function(e){var t=e.onSelectFile,a=Object(r.useRef)();return n.a.createElement("div",{className:"drop-file",onClick:function(){return a.current.click()}},n.a.createElement(v,null),n.a.createElement("label",{htmlFor:"chat"},"Choose a file or drag it here!"),n.a.createElement("input",{type:"file",name:"chat",id:"chat",hidden:!0,ref:a,onChange:function(e){return t(e.target.files[0])}}))},w=function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),y=function(e){var t=e.onSelectFile;return n.a.createElement("div",{className:"card welcome"},n.a.createElement("h1",{className:"welcome-title"},"WhatsApp Chat Viewer"),n.a.createElement("div",{className:"paragraph-1"},n.a.createElement("p",null,"WhatsApp chat viewer is an online tool that allows you to view your WhatsApp exported chats. The web doesn't store any user data it only formats the chat messages in a more visual way in order to help users to read exported chats.")),w?n.a.createElement(E,{onSelectFile:t}):n.a.createElement(b,{onSelectFile:t}),n.a.createElement("div",{className:"paragraph-2"},n.a.createElement("p",null,"In order to be able to use this tool, you will need an exported WhatsApp chat. This file has the extension txt. Bellow, I will show you how you can export a WhatsApp chat."),n.a.createElement("h2",null,"How to export a WhatsApp Chat?"),n.a.createElement("p",null,'Follow the "Export chat history" part of the tutorials bellow.'),n.a.createElement("p",null,n.a.createElement("a",{href:"https://faq.whatsapp.com/en/android/23756533/"},"For Android devices")),n.a.createElement("p",null,n.a.createElement("a",{href:"https://faq.whatsapp.com/en/iphone/26000285/?category=5245251"},"For iPhone devices")),n.a.createElement("h2",null,"About this project."),n.a.createElement("p",null,"This is a personal project developed by"," ",n.a.createElement("a",{href:"https://github.com/MonkeyAndres"},"@MonkeyAndres"),". Is completely free and open source. You can access the source code"," ",n.a.createElement("a",{href:"https://github.com/MonkeyAndres/whatsapp-chat-viewer"},"here.")),n.a.createElement("br",null)))};function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var j=n.a.createElement("line",{x1:19,y1:12,x2:5,y2:12}),C=n.a.createElement("polyline",{points:"12 19 5 12 12 5"}),P=function(e){var t=e.svgRef,a=e.title,r=k(e,["svgRef","title"]);return n.a.createElement("svg",O({width:40,height:40,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-left",ref:t},r),a?n.a.createElement("title",null,a):null,j,C)},N=n.a.forwardRef((function(e,t){return n.a.createElement(P,O({svgRef:t},e))})),x=(a.p,function(e){var t=e.contacts,a=e.onSelectContact,r=e.goBack;return n.a.createElement("div",{className:"card contact-selector"},n.a.createElement("div",{className:"who-are-you"},n.a.createElement(N,{className:"back-arrow",onClick:r}),n.a.createElement("span",{className:"text"},"Select who you are.")),t.map((function(e){return n.a.createElement("button",{className:"contact",key:e,onClick:function(){return a(e)}},e)})))}),R=a(61),L=a(53),S=a(63),M=R.a([L.a,S.a]),F=function(e){var t=e.header,a=e.goBack,r=e.chatSlot;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"chat-header"},n.a.createElement(N,{className:"back-arrow",onClick:a}),n.a.createElement("span",{className:"header-text"},t)),n.a.createElement("div",{className:"chat-grid"},r))},B=function(e){var t=e.msg,a=e.msgRef,r=e.isMine,c=e.isGroup,o=r?"mine":"others";return n.a.createElement("div",{className:"message ".concat(o),ref:a},c&&!r?n.a.createElement("p",{className:"sender"},t.sender):null,n.a.createElement("pre",{className:"content"},t.message),n.a.createElement("span",{className:"date"},t.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))},A=a(35),T=a.n(A),W=a(13),I=a(59),D=a(27),G=a(54),q=a(64),H=function(e,t){return e[t.id]=n.a.createRef(),e},J=function(e){var t=e.chat,a=e.messagesPerPage,r=t.messages,n=I.a(a,r);return{allMessages:r,messagesPerPage:a,messages:n,messageRefs:n.reduce(H,{}),hasMoreMessages:r.length!==n.length,isGroupChat:t.contacts.length>2,page:1}},V=function(e,t){switch(t.type){case"loadPrevious":var a=e.page+1,r=e.allMessages.length,n=D.a(r-a*e.messagesPerPage,r-e.page*e.messagesPerPage,e.allMessages),c=n.reduce(H,{});return Object(W.a)({},e,{page:a,messages:G.a(n,e.messages),messageRefs:q.a([c,e.messageRefs]),hasMoreMessages:e.allMessages.length!==n.length});default:throw new Error}},U=function(e){var t=e.chat,a=e.messagesPerPage,n=Object(r.useReducer)(V,{chat:t,messagesPerPage:a},J),c=Object(l.a)(n,2),o=c[0],s=c[1];Object(r.useLayoutEffect)((function(){var e=o.allMessages.length-(o.page-1)*o.messagesPerPage;o.messageRefs[e].current.scrollIntoView(!0)}),[o.allMessages.length,o.messageRefs,o.messagesPerPage,o.page]);var i=Object(r.useCallback)((function(e){e&&setTimeout((function(){return s({type:"loadPrevious"})}),500)}),[]);return Object(W.a)({loadPrevious:i},o)},Y=function(){return n.a.createElement("img",{src:"https://i.gifer.com/origin/34/34338d26023e5515f6cc8969aa027bca_w200.gif",alt:"loader"})},$=function(e){var t=e.chat,a=e.selectedContact,c=e.goBack,o=U({chat:t,messagesPerPage:100}),l=o.hasMoreMessages,s=o.loadPrevious,i=o.messages,u=o.messageRefs,m=o.isGroupChat,d=Object(r.useCallback)((function(e){var t=e.sender===a;return n.a.createElement(B,{key:e.id,msg:e,msgRef:u[e.id],isMine:t,isGroup:m})}),[m,u,a]);return n.a.createElement("div",{className:"card chat"},n.a.createElement(F,{header:null===t||void 0===t?void 0:t.header,goBack:c,chatSlot:n.a.createElement(n.a.Fragment,null,l&&n.a.createElement(T.a,{onChange:s,delayedCall:!0},n.a.createElement("div",{className:"loader"},n.a.createElement(Y,null))),i.map(d))}))},_=a(30),z=a.n(_),K=a(36),Q=function(e){return new Promise((function(t,a){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){a(e.target.error)},r.readAsText(e)}))},X=a(40),Z=a(60),ee=a(62),te=a(34),ae=a(55),re=a(58),ne=a(14),ce=a(38),oe=a(39),le=a(37),se=a(57),ie=/\[(\d{2}\/\d{2}\/\d{4}), (\d{2}:\d{2}:\d{2})\] ([^:]+): (([^[\]])*)/i,ue=function(e,t){var a=e.split("/"),r=Object(l.a)(a,3),n=r[0],c=r[1],o=r[2],s=t.split(":"),i=Object(l.a)(s,3),u=i[0],m=i[1],d=i[2];return new Date(Date.UTC(o,c-1,n,u,m,d))},me=Z.a(ee.a("\n"),te.a(0),ae.a(/are now secured with end-to-end encryption./),re.a(S.a)),de=Z.a(ne.a(ce.a("sender")),oe.a(Z.a(S.a,le.a)),se.a),he=function(e){var t=function(e){if(!me(e))throw new Error("We cannot read whatsapp chat");return e.match(new RegExp(ie,"g")).map((function(e,t){var a=e.match(ie),r=Object(l.a)(a,5),n=r[1],c=r[2],o=r[3],s=r[4];return{id:t,date:ue(n,c),sender:o,message:s}}))}(e),a=Object(X.a)(t),r=a[0],n=a.slice(1),c=de(n);return{header:r.sender,messages:n,contacts:c}},fe={chat:null,selectedContact:null,error:null,loading:!0},pe=function(e,t){switch(t.type){case"setChat":return Object(W.a)({},e,{chat:t.payload,loading:!1});case"setLoadError":return Object(W.a)({},e,{loading:!1,error:t.payload});case"selectContact":return Object(W.a)({},e,{selectedContact:t.payload});default:throw new Error}},ge=function(e){var t=Object(r.useReducer)(pe,fe),a=Object(l.a)(t,2),n=a[0],c=a[1];Object(r.useEffect)((function(){Object(K.a)(z.a.mark((function t(){var a,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Q(e);case 5:a=t.sent,r=he(a),c({type:"setChat",payload:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),c({type:"setLoadError",payload:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}),[e]);var o=Object(r.useCallback)((function(e){c({type:"selectContact",payload:e})}),[]);return Object(W.a)({},n,{setSelectedContact:o})},ve=function(e){var t=e.error,a=e.goBack;return n.a.createElement("div",{className:"card error"},n.a.createElement("h2",{className:"error-title"},"Error loading WhatsApp Chat"),n.a.createElement("p",{className:"error-description"},null===t||void 0===t?void 0:t.message),n.a.createElement("button",{className:"back-button",onClick:a},"Try again"))},Ee=function(e){var t=e.selectedFile,a=e.goBack,r=ge(t),c=r.chat,o=r.loading,l=r.error,s=r.selectedContact,i=r.setSelectedContact,u=!M(l)&&!o,m=!M(s);return n.a.createElement(n.a.Fragment,null,u&&n.a.createElement(ve,{error:l,goBack:a}),!m&&!u&&n.a.createElement(x,{contacts:(null===c||void 0===c?void 0:c.contacts)||[],onSelectContact:i,goBack:a}),m&&n.a.createElement($,{chat:c,selectedContact:s,goBack:a}))},be=a(56),we=function(e){var t=e.appear,a=e.animationType,r=e.children;return n.a.createElement(be.a,{appear:t,in:t,timeout:{enter:600,exit:200},classNames:a,mountOnEnter:!0,unmountOnExit:!0},r)},ye=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(r.useCallback)((function(e){c(e)}),[]),i=Object(r.useCallback)((function(){return c(null)}),[]);return n.a.createElement(s,null,n.a.createElement(we,{appear:!a,animationType:"from-left"},n.a.createElement(y,{onSelectFile:o})),n.a.createElement(we,{appear:!!a,animationType:"from-right"},n.a.createElement(Ee,{goBack:i,selectedFile:a})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.0d42b891.chunk.js.map