(this["webpackJsonpwhatsapp-chat-viewer"]=this["webpackJsonpwhatsapp-chat-viewer"]||[]).push([[0],{41:function(e,t,a){e.exports=a(50)},46:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(17),o=a.n(c),s=(a(46),a(6)),l=function(e){var t=e.children;return n.a.createElement("div",{className:"layout-grid"},n.a.createElement("div",{className:"back-header"}),t)},i=function(e){Object(r.useEffect)((function(){var t=e.current,a=function(e){e.preventDefault(),e.stopPropagation()},r=function(e){a(e),t.classList.add("is-dragover")},n=function(e){a(e),t.classList.remove("is-dragover")};return t.addEventListener("dragover",r),t.addEventListener("dragenter",r),t.addEventListener("dragleave",n),t.addEventListener("dragend",n),t.addEventListener("drop",n),function(){t.removeEventListener("dragover",r),t.removeEventListener("dragenter",r),t.removeEventListener("dragleave",n),t.removeEventListener("dragend",n),t.removeEventListener("drop",n)}}),[e])},u=function(e,t){Object(r.useEffect)((function(){var a=e.current,r=function(e){e.preventDefault(),t(e.dataTransfer.files[0])};return a.addEventListener("drop",r),function(){return a.removeEventListener("drop",r)}}),[e,t])};function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var f=n.a.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),g=n.a.createElement("polyline",{points:"7 10 12 15 17 10"}),p=n.a.createElement("line",{x1:12,y1:15,x2:12,y2:3}),v=function(e){var t=e.svgRef,a=e.title,r=d(e,["svgRef","title"]);return n.a.createElement("svg",m({width:72,height:72,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-download",ref:t},r),a?n.a.createElement("title",null,a):null,f,g,p)},h=n.a.forwardRef((function(e,t){return n.a.createElement(v,m({svgRef:t},e))})),E=(a.p,function(e){var t=e.onSelectFile,a=Object(r.useRef)(),c=Object(r.useRef)();return u(a,t),i(a),n.a.createElement("div",{className:"drop-file",ref:a,onClick:function(){return c.current.click()}},n.a.createElement(h,null),n.a.createElement("label",{htmlFor:"chat"},"Choose a file or drag it here!"),n.a.createElement("input",{type:"file",name:"chat",id:"chat",hidden:!0,ref:c,onChange:function(e){return t(e.target.files[0])}}))}),b=function(e){var t=e.onSelectFile,a=Object(r.useRef)();return n.a.createElement("div",{className:"drop-file",onClick:function(){return a.current.click()}},n.a.createElement(h,null),n.a.createElement("label",{htmlFor:"chat"},"Choose a file or drag it here!"),n.a.createElement("input",{type:"file",name:"chat",id:"chat",hidden:!0,ref:a,onChange:function(e){return t(e.target.files[0])}}))},O=function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),y=function(e){var t=e.onSelectFile;return n.a.createElement("div",{className:"card welcome"},n.a.createElement("h1",{className:"welcome-title"},"WhatsApp Chat Viewer"),n.a.createElement("div",{className:"paragraph-1"},"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Rerum esse vel necessitatibus! Suscipit a aliquid ea natus dolores temporibus deserunt quod mollitia voluptates modi earum, odio eius explicabo asperiores adipisci?"),O?n.a.createElement(E,{onSelectFile:t}):n.a.createElement(b,{onSelectFile:t}),n.a.createElement("div",{className:"paragraph-2"},n.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Obcaecati repellat corporis incidunt itaque similique, nam quod illo esse amet sequi laboriosam est, dicta assumenda aliquid, inventore animi asperiores velit non?")))};function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var j=n.a.createElement("line",{x1:19,y1:12,x2:5,y2:12}),C=n.a.createElement("polyline",{points:"12 19 5 12 12 5"}),N=function(e){var t=e.svgRef,a=e.title,r=k(e,["svgRef","title"]);return n.a.createElement("svg",w({width:40,height:40,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-left",ref:t},r),a?n.a.createElement("title",null,a):null,j,C)},P=n.a.forwardRef((function(e,t){return n.a.createElement(N,w({svgRef:t},e))})),L=(a.p,function(e){var t=e.contacts,a=e.onSelectContact,r=e.goBack;return n.a.createElement("div",{className:"card contact-selector"},n.a.createElement("div",{className:"who-are-you"},n.a.createElement(P,{className:"back-arrow",onClick:r}),n.a.createElement("span",{className:"text"},"Select who you are.")),t.map((function(e){return n.a.createElement("button",{className:"contact",key:e,onClick:function(){return a(e)}},e)})))}),R=a(58),x=a(52),S=a(61),B=R.a([x.a,S.a]),F=function(e){var t=e.header,a=e.goBack,r=e.chatSlot;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"chat-header"},n.a.createElement(P,{className:"back-arrow",onClick:a}),n.a.createElement("span",{className:"header-text"},t)),n.a.createElement("div",{className:"chat-grid"},r))},M=function(e){var t=e.msg,a=e.msgRef,r=e.isMine,c=e.isGroup,o=r?"mine":"others";return n.a.createElement("div",{className:"message ".concat(o),ref:a},c&&!r?n.a.createElement("p",{className:"sender"},t.sender):null,n.a.createElement("pre",{className:"content"},t.message),n.a.createElement("span",{className:"date"},t.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))},T=a(34),q=a.n(T),W=a(25),D=a(9),G=a(59),I=function(e){var t=e.chat,a=e.messagesPerPage,r=t.messages,c=G.a(a,r);return{allMessages:r,messagesPerPage:a,messages:c,messageRefs:r.reduce((function(e,t){return Object(D.a)({},e,Object(W.a)({},t.id,n.a.createRef()))}),{}),hasMoreMessages:r.length!==c.length,isGroupChat:t.contacts.length>2,page:1}},A=function(e,t){switch(t.type){case"loadPrevious":var a=e.page+1,r=G.a(e.messagesPerPage*a,e.allMessages);return Object(D.a)({},e,{page:a,messages:r,hasMoreMessages:e.allMessages.length!==r.length});default:throw new Error}},J=function(e){var t=e.chat,a=e.messagesPerPage,n=Object(r.useReducer)(A,{chat:t,messagesPerPage:a},I),c=Object(s.a)(n,2),o=c[0],l=c[1];Object(r.useLayoutEffect)((function(){var e=o.allMessages.length-(o.page-1)*o.messagesPerPage;o.messageRefs[e].current.scrollIntoView(!0)}),[o.allMessages.length,o.messageRefs,o.messagesPerPage,o.page]);var i=Object(r.useCallback)((function(e){e&&setTimeout((function(){return l({type:"loadPrevious"})}),500)}),[]);return Object(D.a)({loadPrevious:i},o)},V=function(){return n.a.createElement("img",{src:"https://i.gifer.com/origin/34/34338d26023e5515f6cc8969aa027bca_w200.gif",alt:"loader"})},H=function(e){var t=e.chat,a=e.selectedContact,c=e.goBack,o=J({chat:t,messagesPerPage:100}),s=o.hasMoreMessages,l=o.loadPrevious,i=o.messages,u=o.messageRefs,m=o.isGroupChat,d=Object(r.useCallback)((function(e){var t=e.sender===a;return n.a.createElement(M,{key:e.id,msg:e,msgRef:u[e.id],isMine:t,isGroup:m})}),[m,u,a]);return n.a.createElement("div",{className:"card chat"},n.a.createElement(F,{header:null===t||void 0===t?void 0:t.header,goBack:c,chatSlot:n.a.createElement(n.a.Fragment,null,s&&n.a.createElement(q.a,{onChange:l,delayedCall:!0},n.a.createElement("div",{className:"loader"},n.a.createElement(V,null))),i.map(d))}))},U=a(29),$=a.n(U),_=a(35),z=function(e){return new Promise((function(t,a){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){a(e.target.error)},r.readAsText(e)}))},K=a(39),Q=a(60),X=a(55),Y=a(33),Z=a(53),ee=a(56),te=a(14),ae=a(37),re=a(38),ne=a(36),ce=a(57),oe=/\[(\d{2}\/\d{2}\/\d{4}), (\d{2}:\d{2}:\d{2})\] ([^:]+): (([^[\]])*)/i,se=function(e,t){var a=e.split("/"),r=Object(s.a)(a,3),n=r[0],c=r[1],o=r[2],l=t.split(":"),i=Object(s.a)(l,3),u=i[0],m=i[1],d=i[2];return new Date(Date.UTC(o,c-1,n,u,m,d))},le=Q.a(X.a("\n"),Y.a(0),Z.a(/are now secured with end-to-end encryption./),ee.a(S.a)),ie=Q.a(te.a(ae.a("sender")),re.a(Q.a(S.a,ne.a)),ce.a),ue=function(e){var t=function(e){if(!le(e))throw new Error("We cannot read whatsapp chat");return e.match(new RegExp(oe,"g")).map((function(e,t){var a=e.match(oe),r=Object(s.a)(a,5),n=r[1],c=r[2],o=r[3],l=r[4];return{id:t,date:se(n,c),sender:o,message:l}}))}(e),a=Object(K.a)(t),r=a[0],n=a.slice(1),c=ie(n);return{header:r.sender,messages:n,contacts:c}},me={chat:null,selectedContact:null,error:null,loading:!0},de=function(e,t){switch(t.type){case"setChat":return Object(D.a)({},e,{chat:t.payload,loading:!1});case"setLoadError":return Object(D.a)({},e,{loading:!1,error:t.payload});case"selectContact":return Object(D.a)({},e,{selectedContact:t.payload});default:throw new Error}},fe=function(e){var t=Object(r.useReducer)(de,me),a=Object(s.a)(t,2),n=a[0],c=a[1];Object(r.useEffect)((function(){Object(_.a)($.a.mark((function t(){var a,r;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,z(e);case 5:a=t.sent,r=ue(a),c({type:"setChat",payload:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),c({type:"setLoadError",payload:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}),[e]);var o=Object(r.useCallback)((function(e){c({type:"selectContact",payload:e})}),[]);return Object(D.a)({},n,{setSelectedContact:o})},ge=function(e){var t=e.error,a=e.goBack;return n.a.createElement("div",{className:"card error"},n.a.createElement("h2",{className:"error-title"},"Error loading WhatsApp Chat"),n.a.createElement("p",{className:"error-description"},null===t||void 0===t?void 0:t.message),n.a.createElement("button",{className:"back-button",onClick:a},"Try again"))},pe=function(e){var t=e.selectedFile,a=e.goBack,r=fe(t),c=r.chat,o=r.loading,s=r.error,l=r.selectedContact,i=r.setSelectedContact,u=!B(s)&&!o,m=!B(l);return n.a.createElement(n.a.Fragment,null,o&&n.a.createElement("div",{className:"card loader"},n.a.createElement(V,null)),u&&n.a.createElement(ge,{error:s,goBack:a}),!m&&!u&&n.a.createElement(L,{contacts:(null===c||void 0===c?void 0:c.contacts)||[],onSelectContact:i,goBack:a}),m&&n.a.createElement(H,{chat:c,selectedContact:l,goBack:a}))},ve=a(54),he=function(e){var t=e.appear,a=e.animationType,r=e.children;return n.a.createElement(ve.a,{appear:t,in:t,timeout:{enter:600,exit:200},classNames:a,mountOnEnter:!0,unmountOnExit:!0},r)},Ee=function(){var e=Object(r.useState)(),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(r.useCallback)((function(e){c(e)}),[]),i=Object(r.useCallback)((function(){return c(null)}),[]);return n.a.createElement(l,null,n.a.createElement(he,{appear:!a,animationType:"from-left"},n.a.createElement(y,{onSelectFile:o})),n.a.createElement(he,{appear:!!a,animationType:"from-right"},n.a.createElement(pe,{goBack:i,selectedFile:a})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.d5da0b46.chunk.js.map