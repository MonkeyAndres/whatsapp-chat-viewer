(this["webpackJsonpwhatsapp-chat-viewer"]=this["webpackJsonpwhatsapp-chat-viewer"]||[]).push([[0],{40:function(e,t,a){e.exports=a(47)},45:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(29),l=a.n(c),o=(a(45),a(4)),s=function(e){var t=e.children;return n.a.createElement("div",{className:"layoutGrid"},t)},i=function(){return n.a.createElement("div",{className:"aboutApp"},n.a.createElement("h1",{className:"welcome-title"},"WhatsApp Chat Viewer"),n.a.createElement("div",{className:"paragraph-1"},n.a.createElement("p",null,"WhatsApp chat viewer is an online tool that allows you to view your WhatsApp exported chats. The web doesn't store any user data it only formats the chat messages in a more visual way in order to help users to read exported chats.")),n.a.createElement("div",{className:"paragraph-2"},n.a.createElement("p",null,"In order to be able to use this tool, you will need an exported WhatsApp chat. This file has the extension txt. Bellow, I will show you how you can export a WhatsApp chat."),n.a.createElement("h2",null,"How to export a WhatsApp Chat?"),n.a.createElement("p",null,'Follow the "Export chat history" part of the tutorials bellow.'),n.a.createElement("p",null,n.a.createElement("a",{href:"https://faq.whatsapp.com/en/android/23756533/"},"For Android devices")),n.a.createElement("p",null,n.a.createElement("a",{href:"https://faq.whatsapp.com/en/iphone/26000285/?category=5245251"},"For iPhone devices")),n.a.createElement("h2",null,"About this project."),n.a.createElement("p",null,"This is a personal project developed by"," ",n.a.createElement("a",{href:"https://github.com/MonkeyAndres"},"@MonkeyAndres"),". Is completely free and open source. You can access the source code"," ",n.a.createElement("a",{href:"https://github.com/MonkeyAndres/whatsapp-chat-viewer"},"here.")),n.a.createElement("br",null)))},u=function(e){Object(r.useEffect)((function(){var t=e.current,a=function(e){e.preventDefault(),e.stopPropagation()},r=function(e){a(e),t.classList.add("is-dragover")},n=function(e){a(e),t.classList.remove("is-dragover")};return t.addEventListener("dragover",r),t.addEventListener("dragenter",r),t.addEventListener("dragleave",n),t.addEventListener("dragend",n),t.addEventListener("drop",n),function(){t.removeEventListener("dragover",r),t.removeEventListener("dragenter",r),t.removeEventListener("dragleave",n),t.removeEventListener("dragend",n),t.removeEventListener("drop",n)}}),[e])},m=function(e,t){Object(r.useEffect)((function(){var a=e.current,r=function(e){e.preventDefault(),t(e.dataTransfer.files[0])};return a.addEventListener("drop",r),function(){return a.removeEventListener("drop",r)}}),[e,t])};function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var h=n.a.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),p=n.a.createElement("polyline",{points:"7 10 12 15 17 10"}),g=n.a.createElement("line",{x1:12,y1:15,x2:12,y2:3}),v=function(e){var t=e.svgRef,a=e.title,r=f(e,["svgRef","title"]);return n.a.createElement("svg",d({width:72,height:72,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-download",ref:t},r),a?n.a.createElement("title",null,a):null,h,p,g)},E=n.a.forwardRef((function(e,t){return n.a.createElement(v,d({svgRef:t},e))})),b=(a.p,function(e){var t=e.onSelectFile,a=Object(r.useRef)(),c=Object(r.useRef)();return m(a,t),u(a),n.a.createElement("div",{className:"selectFile selectFile--advance",ref:a,onClick:function(){return c.current.click()}},n.a.createElement(E,{className:"selectFile-icon"}),n.a.createElement("h2",{className:"selectFile-label",htmlFor:"chat"},"Choose a file or drag it here!"),n.a.createElement("input",{type:"file",name:"chat",id:"chat",hidden:!0,ref:c,onChange:function(e){return t(e.target.files[0])}}))}),w=function(e){var t=e.onSelectFile,a=Object(r.useRef)();return n.a.createElement("div",{className:"selectFile",onClick:function(){return a.current.click()}},n.a.createElement(E,{className:"selectFile-icon"}),n.a.createElement("h2",{className:"selectFile-label",htmlFor:"chat"},"Choose a file!"),n.a.createElement("input",{type:"file",name:"chat",id:"chat",hidden:!0,ref:a,onChange:function(e){return t(e.target.files[0])}}))},y=function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),O=function(e){var t=e.onSelectFile;return n.a.createElement("div",{className:"selectFileView"},y?n.a.createElement(b,{onSelectFile:t}):n.a.createElement(w,{onSelectFile:t}))},j=a(30),C=a.n(j),k=a(33),N=a(12),x=function(e){return new Promise((function(t,a){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){a(e.target.error)},r.readAsText(e)}))},P=a(39),M=a(54),R=a(57),L=a(34),S=a(48),F=a(52),A=a(58),W=a(14),B=a(37),T=a(38),V=a(35),I=a(51),G=/\[(\d{2}\/\d{2}\/\d{4}), (\d{2}:\d{2}:\d{2})\] ([^:]+): (([^[\]])*)/i,D=function(e,t){var a=e.split("/"),r=Object(o.a)(a,3),n=r[0],c=r[1],l=r[2],s=t.split(":"),i=Object(o.a)(s,3),u=i[0],m=i[1],d=i[2];return new Date(Date.UTC(l,c-1,n,u,m,d))},H=M.a(R.a("\n"),L.a(0),S.a(/are now secured with end-to-end encryption./),F.a(A.a)),q=M.a(W.a(B.a("sender")),T.a(M.a(A.a,V.a)),I.a),z=function(e){var t=function(e){if(!H(e))throw new Error("We cannot read whatsapp chat");return e.match(new RegExp(G,"g")).map((function(e,t){var a=e.match(G),r=Object(o.a)(a,5),n=r[1],c=r[2],l=r[3],s=r[4];return{id:t,date:D(n,c),sender:l,message:s}}))}(e),a=Object(P.a)(t),r=a[0],n=a.slice(1),c=q(n);return{header:r.sender,messages:n,contacts:c}},J={chat:null,selectedContact:null,error:null,loading:!1},U=function(e,t){switch(t.type){case"startLoading":return Object(N.a)({},e,{loading:!0});case"setChat":return Object(N.a)({},e,{chat:t.payload,loading:!1,error:null});case"setLoadError":return Object(N.a)({},e,{loading:!1,error:t.payload});case"selectContact":return Object(N.a)({},e,{selectedContact:t.payload});default:throw new Error}},Y=function(e){var t=Object(r.useReducer)(U,J),a=Object(o.a)(t,2),n=a[0],c=a[1];Object(r.useEffect)((function(){Object(k.a)(C.a.mark((function t(){var a,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}return t.abrupt("return");case 3:return c({type:"startLoading"}),t.next=6,x(e);case 6:a=t.sent,r=z(a),c({type:"setChat",payload:r}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),c({type:"setLoadError",payload:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}),[e]);var l=Object(r.useCallback)((function(e){c({type:"selectContact",payload:e})}),[]);return Object(N.a)({},n,{setSelectedContact:l})},$=a(55),K=a(49),Q=$.a([K.a,A.a]);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var _=n.a.createElement("circle",{cx:15,cy:15,r:15},n.a.createElement("animate",{attributeName:"r",from:15,to:15,begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),n.a.createElement("animate",{attributeName:"fill-opacity",from:1,to:1,begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),ee=n.a.createElement("circle",{cx:60,cy:15,r:9,fillOpacity:.3},n.a.createElement("animate",{attributeName:"r",from:9,to:9,begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),n.a.createElement("animate",{attributeName:"fill-opacity",from:.5,to:.5,begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),te=n.a.createElement("circle",{cx:105,cy:15,r:15},n.a.createElement("animate",{attributeName:"r",from:15,to:15,begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),n.a.createElement("animate",{attributeName:"fill-opacity",from:1,to:1,begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),ae=function(e){var t=e.svgRef,a=e.title,r=Z(e,["svgRef","title"]);return n.a.createElement("svg",X({width:120,height:30,viewBox:"0 0 120 30",fill:"#fff",ref:t},r),a?n.a.createElement("title",null,a):null,_,ee,te)},re=n.a.forwardRef((function(e,t){return n.a.createElement(ae,X({svgRef:t},e))})),ne=(a.p,re),ce=function(){return n.a.createElement("div",{className:"spinnerView"},n.a.createElement(ne,null))},le=function(e){var t=e.error,a=e.onClickTryAgain;return n.a.createElement("div",{className:"errorView"},n.a.createElement("h2",{className:"errorView-title"},"Error loading WhatsApp Chat"),n.a.createElement("p",{className:"errorView-description"},null===t||void 0===t?void 0:t.message),n.a.createElement("button",{className:"errorView-button",onClick:a},"Try again"))};function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function se(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var ie=n.a.createElement("line",{x1:19,y1:12,x2:5,y2:12}),ue=n.a.createElement("polyline",{points:"12 19 5 12 12 5"}),me=function(e){var t=e.svgRef,a=e.title,r=se(e,["svgRef","title"]);return n.a.createElement("svg",oe({width:40,height:40,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-left",ref:t},r),a?n.a.createElement("title",null,a):null,ie,ue)},de=n.a.forwardRef((function(e,t){return n.a.createElement(me,oe({svgRef:t},e))})),fe=(a.p,function(e){var t=e.contacts,a=e.onSelectContact,r=e.goBack;return n.a.createElement("div",{className:"contactSelector"},n.a.createElement("div",{className:"contactSelector-header"},n.a.createElement(de,{className:"back-arrow",onClick:r}),n.a.createElement("h3",{className:"text"},"Select who you are.")),n.a.createElement("div",{className:"contactSelector-contactList"},t.map((function(e){return n.a.createElement("button",{className:"contactSelector-contact",key:e,onClick:function(){return a(e)}},e)}))))}),he=function(e){var t=e.header,a=e.goBack,r=e.chatSlot;return n.a.createElement("div",{className:"chatView"},n.a.createElement("div",{className:"chatView-header"},n.a.createElement(de,{className:"back-arrow",onClick:a}),n.a.createElement("h3",{className:"header-text"},t)),n.a.createElement("div",{className:"chatView-container"},r))},pe=function(e){var t=e.msg,a=e.msgRef,r=e.isMine,c=e.isGroup,l=r?"mine":"others";return n.a.createElement("div",{className:"message ".concat(l),ref:a},c&&!r?n.a.createElement("p",{className:"sender"},t.sender):null,n.a.createElement("pre",{className:"content"},t.message),n.a.createElement("span",{className:"date"},t.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))},ge=a(36),ve=a.n(ge),Ee=a(53),be=a(50),we=a(56),ye=function(e,t){return e[t.id]=n.a.createRef(),e},Oe=function(e){var t=e.chat,a=e.messagesPerPage,r=t.messages,n=Ee.a(a,r);return{allMessages:r,messagesPerPage:a,messages:n,messageRefs:n.reduce(ye,{}),hasMoreMessages:r.length!==n.length,isGroupChat:t.contacts.length>2,page:1}},je=function(e,t){switch(t.type){case"loadPrevious":if(!e.hasMoreMessages)return e;var a=e.page+1,r=e.allMessages.length,n=e.allMessages.slice(Math.max(0,r-a*e.messagesPerPage),r-e.page*e.messagesPerPage),c=n.reduce(ye,{}),l=be.a(n,e.messages);return Object(N.a)({},e,{page:a,messages:l,messageRefs:we.a([c,e.messageRefs]),hasMoreMessages:e.allMessages.length!==l.length});default:throw new Error}},Ce=function(e){var t=e.chat,a=e.messagesPerPage,n=Object(r.useReducer)(je,{chat:t,messagesPerPage:a},Oe),c=Object(o.a)(n,2),l=c[0],s=c[1];Object(r.useLayoutEffect)((function(){var e=l.allMessages.length,t=Math.max(1,e-(l.page-1)*l.messagesPerPage);l.messageRefs[t].current.scrollIntoView(!0)}),[l.allMessages.length,l.messageRefs,l.messagesPerPage,l.page]);var i=Object(r.useCallback)((function(e){e&&setTimeout((function(){return s({type:"loadPrevious"})}),400)}),[]);return Object(N.a)({loadPrevious:i},l)},ke=function(e){var t=e.chat,a=e.selectedContact,c=e.goBack,l=Ce({chat:t,messagesPerPage:100}),o=l.hasMoreMessages,s=l.loadPrevious,i=l.messages,u=l.messageRefs,m=l.isGroupChat,d=Object(r.useCallback)((function(e){var t=e.sender===a;return n.a.createElement(pe,{key:e.id,msg:e,msgRef:u[e.id],isMine:t,isGroup:m})}),[m,u,a]);return n.a.createElement(he,{header:null===t||void 0===t?void 0:t.header,goBack:c,chatSlot:n.a.createElement(n.a.Fragment,null,o&&n.a.createElement(ve.a,{onChange:s,delayedCall:!0},n.a.createElement("div",{className:"loader"},n.a.createElement(ne,null))),i.map(d))})};function Ne(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var xe=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Y(a),u=l.chat,m=l.loading,d=l.error,f=l.selectedContact,h=l.setSelectedContact,p=!Q(a),g=!Q(f),v=Object(r.useCallback)((function(){c(null),h(null)}),[h]),E=function(){var e=Object(r.useState)(Ne()),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){function e(){n(Ne())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}().width<=768;return n.a.createElement(s,null,(!p||!E)&&n.a.createElement(i,null),n.a.createElement("div",{className:"chatContainer"},p?m?n.a.createElement(ce,null):Q(d)?g?n.a.createElement(ke,{chat:u,selectedContact:f,goBack:v}):n.a.createElement(fe,{contacts:(null===u||void 0===u?void 0:u.contacts)||[],onSelectContact:h,goBack:v}):n.a.createElement(le,{error:d,onClickTryAgain:v}):n.a.createElement(O,{onSelectFile:c})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.8ec1c6c8.chunk.js.map